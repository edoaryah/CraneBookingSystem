<!-- Views/CraneUsage/Details.cshtml -->
@model AspnetCoreMvcFull.ViewModels.CraneUsage.CraneUsageRecordViewModel

@{
  ViewData["Title"] = "Detail Penggunaan Crane";
  Layout = "_ContentNavbarLayout";
}

<div class="container-fluid">
  <h1 class="mt-4">Detail Penggunaan Crane</h1>
  <p class="lead">Informasi lengkap catatan penggunaan crane</p>

  <div class="card mb-4">
    <div class="card-header">
      <i class="fas fa-info-circle me-1"></i>
      Detail Penggunaan Crane
    </div>
    <div class="card-body">
      <div class="row mb-3">
        <div class="col-md-6">
          <dl class="row">
            <dt class="col-sm-4">Crane</dt>
            <dd class="col-sm-8">@Model.CraneName</dd>

            <dt class="col-sm-4">Waktu Mulai</dt>
            <dd class="col-sm-8">@Model.StartTime.ToString("dd/MM/yyyy HH:mm")</dd>

            <dt class="col-sm-4">Waktu Selesai</dt>
            <dd class="col-sm-8">@Model.EndTime.ToString("dd/MM/yyyy HH:mm")</dd>

            <dt class="col-sm-4">Durasi</dt>
            <dd class="col-sm-8">@((Model.EndTime - Model.StartTime).TotalHours.ToString("F2")) jam</dd>
          </dl>
        </div>
        <div class="col-md-6">
          <dl class="row">
            <dt class="col-sm-4">Kategori</dt>
            <dd class="col-sm-8">
              <span class="badge" style="background-color: @GetCategoryColor(Model.Category)">
                @Model.CategoryName
              </span>
            </dd>

            <dt class="col-sm-4">Subkategori</dt>
            <dd class="col-sm-8">@Model.SubcategoryName</dd>

            <dt class="col-sm-4">Operator</dt>
            <dd class="col-sm-8">@(Model.OperatorName ?? "-")</dd>

            @if (!string.IsNullOrEmpty(Model.BookingNumber))
            {
              <dt class="col-sm-4">Booking</dt>
              <dd class="col-sm-8">@Model.BookingNumber</dd>
            }

            @if (!string.IsNullOrEmpty(Model.MaintenanceTitle))
            {
              <dt class="col-sm-4">Maintenance</dt>
              <dd class="col-sm-8">@Model.MaintenanceTitle</dd>
            }
          </dl>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-12">
          <h5>Catatan</h5>
          <p>@(Model.Notes ?? "Tidak ada catatan.")</p>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <dl class="row">
            <dt class="col-sm-4">Dibuat Oleh</dt>
            <dd class="col-sm-8">@Model.CreatedBy</dd>
          </dl>
        </div>
        <div class="col-md-6">
          <dl class="row">
            <dt class="col-sm-4">Dibuat Pada</dt>
            <dd class="col-sm-8">@Model.CreatedAt.ToString("dd/MM/yyyy HH:mm")</dd>
          </dl>
        </div>
      </div>

      <div>
        <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning text-white">
          <i class="fas fa-edit me-1"></i> Edit
        </a>
        <a asp-action="Index" class="btn btn-secondary">
          <i class="fas fa-arrow-left me-1"></i> Kembali
        </a>
      </div>
    </div>
  </div>
</div>

@functions {
  public string GetCategoryColor(UsageCategory category)
  {
    return category switch
    {
      UsageCategory.Operating => "#28a745", // Green
      UsageCategory.Delay => "#ffc107", // Yellow
      UsageCategory.Standby => "#6c757d", // Gray
      UsageCategory.Service => "#17a2b8", // Cyan
      UsageCategory.Breakdown => "#dc3545", // Red
      _ => "#6c757d" // Default Gray
    };
  }
}
